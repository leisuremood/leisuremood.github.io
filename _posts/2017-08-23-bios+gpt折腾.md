---
layout: post
title:  "bios+gpt折腾"
date:   2017-08-23
tags:
      - 随笔
---


bios + gpt 折腾

reference :

https://blog.csdn.net/littlesmallless/article/details/59173072

https://bbs.pcbeta.com/viewthread-1573292-1-1.html

很好。

一点注意：

grub2-install /dev/sda

就把core.img写入Boot Partition.不是sda1.

references:

https://www.lightofdawn.org/wiki/wiki.cgi/BIOSBootGPT

https://blog.csdn.net/sqhxhg/article/details/8456689

BIOS系统：

1、GRUB（2）：需要2MiB"BIOS启动分区"（requires a 2 MiB \"BIOS Boot
Partition\" (EF02 type code in gdisk and bios_grub flag in GNU Parted)
in BIOS systems to embed itscore.img file due to lack of post-MBR embed
gap in GPT disks. Runtime GPT support in GRUB(2) is provided by
thepart_gpt module.
See[GRUB#GPT_specific_instructions](https://wiki.archlinux.org/index.php/GRUB#GPT_specific_instructions)
for more information）;



https://wiki.archlinux.org/index.php/GRUB

On a BIOS/[GPT](https://wiki.archlinux.org/index.php/GPT) configuration
a [BIOS boot
partition](https://www.gnu.org/software/grub/manual/html_node/BIOS-installation.html)
is required. GRUB embeds its core.img into this partition.

**Note:**

-   Before attempting this method keep in mind that not all systems will
    be able to support this partitioning scheme. Read more on [GUID
    partition
    tables](https://wiki.archlinux.org/index.php/GUID_Partition_Table#BIOS_systems)\[[broken
    link](https://wiki.archlinux.org/index.php/ArchWiki:Requests#Broken_section_links):
    invalid section\].

-   This additional partition is only needed on a GRUB, BIOS/GPT
    partitioning scheme. Previously, for a GRUB, BIOS/MBR partitioning
    scheme, GRUB used the Post-MBR gap for the embedding the core.img).
    GRUB for GPT, however, does not use the Post-GPT gap to conform to
    GPT specifications that require 1_megabyte/2048_sector disk
    boundaries.

-   For [UEFI](https://wiki.archlinux.org/index.php/UEFI) systems this
    extra partition is not required, since no embedding of boot sectors
    takes place in that case. However, UEFI systems still require an
    [ESP](https://wiki.archlinux.org/index.php/ESP).

grub 安装到c盘。

grub2-install \--boot-directory=/mnt/c /dev/sda

syslinux/memdisk \--\> /mnt/c/syslinux/memdisk 

\# cat custom.cfg

menuentry \'Windows 7 (from VHD)\' \--class windows \--class os
\$menuentry_id_option \'osprober-chain-082608C02608B0AC\' {

        insmod part_gpt

        insmod ntfs

        set root=\'hd0,gpt3\'

        if \[ x\$feature_platform_search_hint = xy \]; then

          search
\--no-floppy \--fs-uuid \--set=root \--hint-bios=hd0,gpt3 \--hint-efi=hd0,gpt3 \--hint-baremetal=ahci0,gpt3 
082608C02608B0AC

        else

          search \--no-floppy \--fs-uuid \--set=root 082608C02608B0AC

        fi

        linux16 /syslinux/memdisk harddisk

        initrd16 /cwbootmgr.vhd

}



Hybrid 方法：

https://www.rodsbooks.com/gdisk/hybrid.html

https://www.rodsbooks.com/gdisk/bios.html



